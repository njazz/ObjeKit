<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max API: Using Jitter Objects in C</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Max API
   &#160;<span id="projectnumber">8.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('chapter_jit_usingobjs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using Jitter Objects in C </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When developing for Jitter in C, the functionality of pre-existing Jitter objects can be used.</p>
<p>In this chapter, we'll briefly examine instantation and incorporation of the features of the jit.movie and jit.qt.record objects from your C code.</p>
<h1><a class="anchor" id="chapter_jit_usingobjs_ex1"></a>
Example 1: the t_jit_qt_movie object</h1>
<p>Using an object like t_jit_qt_movie from your own code is fairly straightforward. Since it's a standard Jitter object, we can use jit_object_new() and <a class="el" href="group__objectmod.html#ga64970b62e5afe7a2cbd57efd6e9e9f74" title="Frees an object.">jit_object_free()</a> for instantiation and freeing, jit_object_method() for sending messages, and jit_attr_get... and jit_attr_set... for getting and setting attributes.</p>
<p>For instance, in the following code snippet, we'll create a t_jit_qt_movie object, read a pre-specified movie from disk, and decompress its first frame into a matrix, set to the native size of the movie.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> jit_foo_read_first_movie_frame(</div>
<div class="line">   t_jit_foo *x, <a class="code" href="structt__symbol.html">t_symbol</a> *s, <span class="keywordtype">long</span> ac, <a class="code" href="structt__atom.html">t_atom</a> *av)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">void</span> *qtmovie;</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// create the t_jit_qt_movie object, sized to 1x1</span></div>
<div class="line">   qtmovie = jit_object_new(<a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb">gensym</a>(<span class="stringliteral">&quot;jit_qt_movie&quot;</span>), 1, 1);</div>
<div class="line">   <span class="keywordflow">if</span> (qtmovie) {</div>
<div class="line">      <a class="code" href="structt__atom.html">t_atom</a> rv; <span class="comment">// will contain rvarr, with any return values</span></div>
<div class="line">                 <span class="comment">// from our &quot;read&quot; call</span></div>
<div class="line">      <a class="code" href="structt__object.html">t_object</a> *rvarr; <span class="comment">// the t_atomarray with the actual</span></div>
<div class="line">                       <span class="comment">// return values</span></div>
<div class="line"> </div>
<div class="line">      <span class="comment">// turn off autostart</span></div>
<div class="line">      <a class="code" href="group__attrmod.html#gafe9a672c8c2eee7c62038dc223beff66">jit_attr_setlong</a>(qtmovie, <a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb">gensym</a>(<span class="stringliteral">&quot;autostart&quot;</span>), 0);</div>
<div class="line">      <span class="comment">// read the movie, just pass in the args to our function</span></div>
<div class="line">      <a class="code" href="group__obj.html#ga443dee482af22e0fe83e68955d367226">object_method_typed</a>(qtmovie, <a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb">gensym</a>(<span class="stringliteral">&quot;read&quot;</span>), ac, av, &amp;rv);</div>
<div class="line"> </div>
<div class="line">      <span class="comment">// check the return value &amp; verify that the movie loaded</span></div>
<div class="line">      <span class="keywordflow">if</span> (rvarr = <a class="code" href="group__atommod.html#ga84dda6fa7e1e2f29e897c1d87a06ba8e">jit_atom_getobj</a>(&amp;rv)) {</div>
<div class="line">         <span class="keywordtype">long</span> rvac = 0;</div>
<div class="line">         <a class="code" href="structt__atom.html">t_atom</a> *rvav = NULL;</div>
<div class="line"> </div>
<div class="line">         <a class="code" href="group__obj.html#gab033973cea2f4a0b17bb48ab2f22f051">object_getvalueof</a>(rvarr, &amp;rvac, &amp;rvav);</div>
<div class="line">         <span class="keywordflow">if</span> (rvac &amp;&amp; rvav) {</div>
<div class="line">            <span class="comment">// just as in Max, we get a list: &quot;filename success&quot;;</span></div>
<div class="line">            <span class="comment">// success of 1 means the read was successful</span></div>
<div class="line">            <span class="keywordflow">if</span> (rvac &gt; 1 &amp;&amp; <a class="code" href="group__atommod.html#gaf63b5b3ffc46134bed05adf071a7d52a">jit_atom_getlong</a>(rvav + 1)) {</div>
<div class="line">               <span class="keywordtype">long</span> dim[2];</div>
<div class="line">               <span class="keywordtype">void</span> *matrix;</div>
<div class="line">               <a class="code" href="structt__jit__matrix__info.html">t_jit_matrix_info</a> info;</div>
<div class="line"> </div>
<div class="line">               <span class="comment">// get our movie&#39;s native dims</span></div>
<div class="line">               <a class="code" href="group__attrmod.html#gac22c2370ca40b23c110321f2b3af3d89">jit_attr_getlong_array</a>(qtmovie, <a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb">gensym</a>(<span class="stringliteral">&quot;movie_dim&quot;</span>),</div>
<div class="line">                  2, dim);</div>
<div class="line">               <span class="comment">// set the t_jit_qt_movie&#39;s dim to match</span></div>
<div class="line">               jit_object_method(qtmovie,<a class="code" href="group__jitter.html#gae59203825989a640817bad4d5b0961dd">_jit_sym_dim</a>,dim[0],dim[1]);</div>
<div class="line">               <span class="comment">// set our matrix up to match</span></div>
<div class="line">               <a class="code" href="group__matrixmod.html#ga9c068d7781425345e99576a1955366af">jit_matrix_info_default</a>(&amp;info);</div>
<div class="line">               info.<a class="code" href="structt__jit__matrix__info.html#aabcce88ec5bd51aea1662efef2adaf9a">type</a> = <a class="code" href="group__jitter.html#ga3a06cf8d41c4f4c017c0bf825fec59f8">_jit_sym_char</a>;</div>
<div class="line">               info.<a class="code" href="structt__jit__matrix__info.html#a4f8e32123477684b18c83ca3d9079803">planecount</a> = 4;</div>
<div class="line">               info.<a class="code" href="structt__jit__matrix__info.html#a51f55844070b10955b23235f6ef68d1c">dimcount</a> = 2;</div>
<div class="line">               info.<a class="code" href="structt__jit__matrix__info.html#a1910d191539aa64e8a949c62629e17b0">dim</a>[0] = dim[0];</div>
<div class="line">               info.<a class="code" href="structt__jit__matrix__info.html#a1910d191539aa64e8a949c62629e17b0">dim</a>[1] = dim[1];</div>
<div class="line">               matrix = jit_object_new(<a class="code" href="group__jitter.html#ga8f405e5881e1e61c374ee50a0b65316e">_jit_sym_jit_matrix</a>, &amp;info);</div>
<div class="line">               <span class="keywordflow">if</span> (matrix) {</div>
<div class="line">                  <span class="comment">// call the t_jit_qt_movie&#39;s matrix_calc method</span></div>
<div class="line">                  <span class="comment">// with our matrix as an argument</span></div>
<div class="line">                  err = (t_jit_err)jit_object_method(qtmovie,</div>
<div class="line">                     <a class="code" href="group__jitter.html#ga3dde1a04b3c379fdebae36d532924b13">_jit_sym_matrix_calc</a>, NULL, matrix);</div>
<div class="line">                  <span class="keywordflow">if</span> (err != JIT_ERR_NONE) {</div>
<div class="line">                     <a class="code" href="group__console.html#ga8a87d2e25431900a88722759ec115757">error</a>(<span class="stringliteral">&quot;something went wrong&quot;</span>);</div>
<div class="line">                  }</div>
<div class="line">                  <span class="comment">// do something with the matrix</span></div>
<div class="line"> </div>
<div class="line">                  <span class="comment">// free the matrix</span></div>
<div class="line">                  <a class="code" href="group__objectmod.html#ga64970b62e5afe7a2cbd57efd6e9e9f74">jit_object_free</a>(matrix);</div>
<div class="line">               }</div>
<div class="line">            }</div>
<div class="line">            <a class="code" href="group__memory.html#ga5520eadf3494221726cfaf3cbd35f8e9">freebytes</a>(rvav, <span class="keyword">sizeof</span>(<a class="code" href="structt__atom.html">t_atom</a>) * rvac);</div>
<div class="line">         }</div>
<div class="line">         <a class="code" href="group__class__old.html#gabc32625be7059b1423cbb672635336d9">freeobject</a>(rvarr);</div>
<div class="line">      }</div>
<div class="line">      <a class="code" href="group__objectmod.html#ga64970b62e5afe7a2cbd57efd6e9e9f74">jit_object_free</a>(qtmovie);</div>
<div class="line">   }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__atommod_html_ga84dda6fa7e1e2f29e897c1d87a06ba8e"><div class="ttname"><a href="group__atommod.html#ga84dda6fa7e1e2f29e897c1d87a06ba8e">jit_atom_getobj</a></div><div class="ttdeci">void * jit_atom_getobj(t_atom *a)</div><div class="ttdoc">Retrieves atom value as object pointer.</div><div class="ttdef"><b>Definition:</b> jit.atom.c:138</div></div>
<div class="ttc" id="agroup__atommod_html_gaf63b5b3ffc46134bed05adf071a7d52a"><div class="ttname"><a href="group__atommod.html#gaf63b5b3ffc46134bed05adf071a7d52a">jit_atom_getlong</a></div><div class="ttdeci">t_atom_long jit_atom_getlong(t_atom *a)</div><div class="ttdoc">Retrieves atom value as long integer.</div><div class="ttdef"><b>Definition:</b> jit.atom.c:90</div></div>
<div class="ttc" id="agroup__attrmod_html_gac22c2370ca40b23c110321f2b3af3d89"><div class="ttname"><a href="group__attrmod.html#gac22c2370ca40b23c110321f2b3af3d89">jit_attr_getlong_array</a></div><div class="ttdeci">long jit_attr_getlong_array(void *x, t_symbol *s, long max, t_atom_long *vals)</div><div class="ttdoc">Retrieves attribute value as an array of long integer values.</div><div class="ttdef"><b>Definition:</b> jit.attribute.util.c:186</div></div>
<div class="ttc" id="agroup__attrmod_html_gafe9a672c8c2eee7c62038dc223beff66"><div class="ttname"><a href="group__attrmod.html#gafe9a672c8c2eee7c62038dc223beff66">jit_attr_setlong</a></div><div class="ttdeci">t_jit_err jit_attr_setlong(void *x, t_symbol *s, t_atom_long c)</div><div class="ttdoc">Sets attribute value as a long integer value.</div><div class="ttdef"><b>Definition:</b> jit.attribute.util.c:70</div></div>
<div class="ttc" id="agroup__class__old_html_gabc32625be7059b1423cbb672635336d9"><div class="ttname"><a href="group__class__old.html#gabc32625be7059b1423cbb672635336d9">freeobject</a></div><div class="ttdeci">void freeobject(void *op)</div><div class="ttdoc">Release the memory used by a Max object.</div></div>
<div class="ttc" id="agroup__console_html_ga8a87d2e25431900a88722759ec115757"><div class="ttname"><a href="group__console.html#ga8a87d2e25431900a88722759ec115757">error</a></div><div class="ttdeci">void error(C74_CONST char *fmt,...)</div><div class="ttdoc">Print an error to the Max window.</div></div>
<div class="ttc" id="agroup__jitter_html_ga3a06cf8d41c4f4c017c0bf825fec59f8"><div class="ttname"><a href="group__jitter.html#ga3a06cf8d41c4f4c017c0bf825fec59f8">_jit_sym_char</a></div><div class="ttdeci">JIT_EX_DATA t_symbol * _jit_sym_char</div><div class="ttdoc">cached t_symbol</div><div class="ttdef"><b>Definition:</b> jit.symbols.h:25</div></div>
<div class="ttc" id="agroup__jitter_html_ga3dde1a04b3c379fdebae36d532924b13"><div class="ttname"><a href="group__jitter.html#ga3dde1a04b3c379fdebae36d532924b13">_jit_sym_matrix_calc</a></div><div class="ttdeci">JIT_EX_DATA t_symbol * _jit_sym_matrix_calc</div><div class="ttdoc">cached t_symbol</div><div class="ttdef"><b>Definition:</b> jit.symbols.h:81</div></div>
<div class="ttc" id="agroup__jitter_html_ga8f405e5881e1e61c374ee50a0b65316e"><div class="ttname"><a href="group__jitter.html#ga8f405e5881e1e61c374ee50a0b65316e">_jit_sym_jit_matrix</a></div><div class="ttdeci">JIT_EX_DATA t_symbol * _jit_sym_jit_matrix</div><div class="ttdoc">cached t_symbol</div><div class="ttdef"><b>Definition:</b> jit.symbols.h:40</div></div>
<div class="ttc" id="agroup__jitter_html_gae59203825989a640817bad4d5b0961dd"><div class="ttname"><a href="group__jitter.html#gae59203825989a640817bad4d5b0961dd">_jit_sym_dim</a></div><div class="ttdeci">JIT_EX_DATA t_symbol * _jit_sym_dim</div><div class="ttdoc">cached t_symbol</div><div class="ttdef"><b>Definition:</b> jit.symbols.h:35</div></div>
<div class="ttc" id="agroup__matrixmod_html_ga9c068d7781425345e99576a1955366af"><div class="ttname"><a href="group__matrixmod.html#ga9c068d7781425345e99576a1955366af">jit_matrix_info_default</a></div><div class="ttdeci">t_jit_err jit_matrix_info_default(t_jit_matrix_info *info)</div><div class="ttdoc">Initializes matrix info struct to default values.</div><div class="ttdef"><b>Definition:</b> jit.matrix.c:833</div></div>
<div class="ttc" id="agroup__memory_html_ga5520eadf3494221726cfaf3cbd35f8e9"><div class="ttname"><a href="group__memory.html#ga5520eadf3494221726cfaf3cbd35f8e9">freebytes</a></div><div class="ttdeci">void freebytes(void *b, t_getbytes_size size)</div><div class="ttdoc">Free memory allocated with getbytes().</div></div>
<div class="ttc" id="agroup__obj_html_ga443dee482af22e0fe83e68955d367226"><div class="ttname"><a href="group__obj.html#ga443dee482af22e0fe83e68955d367226">object_method_typed</a></div><div class="ttdeci">t_max_err object_method_typed(void *x, t_symbol *s, long ac, t_atom *av, t_atom *rv)</div><div class="ttdoc">Sends a type-checked message to an object.</div></div>
<div class="ttc" id="agroup__obj_html_gab033973cea2f4a0b17bb48ab2f22f051"><div class="ttname"><a href="group__obj.html#gab033973cea2f4a0b17bb48ab2f22f051">object_getvalueof</a></div><div class="ttdeci">t_max_err object_getvalueof(void *x, long *ac, t_atom **av)</div><div class="ttdoc">Retrieves the value of an object which supports the getvalueof/setvalueof interface.</div></div>
<div class="ttc" id="agroup__objectmod_html_ga64970b62e5afe7a2cbd57efd6e9e9f74"><div class="ttname"><a href="group__objectmod.html#ga64970b62e5afe7a2cbd57efd6e9e9f74">jit_object_free</a></div><div class="ttdeci">t_jit_err jit_object_free(void *x)</div><div class="ttdoc">Frees an object.</div><div class="ttdef"><b>Definition:</b> jit.foundation.c:936</div></div>
<div class="ttc" id="agroup__symbol_html_ga5d8db08b384aeb76eaee85a15f46fbcb"><div class="ttname"><a href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb">gensym</a></div><div class="ttdeci">t_symbol * gensym(C74_CONST char *s)</div><div class="ttdoc">Given a C-string, fetch the matching t_symbol pointer from the symbol table, generating the symbol if...</div></div>
<div class="ttc" id="astructt__atom_html"><div class="ttname"><a href="structt__atom.html">t_atom</a></div><div class="ttdoc">An atom is a typed datum.</div><div class="ttdef"><b>Definition:</b> ext_mess.h:323</div></div>
<div class="ttc" id="astructt__jit__matrix__info_html"><div class="ttname"><a href="structt__jit__matrix__info.html">t_jit_matrix_info</a></div><div class="ttdoc">Matrix information struct.</div><div class="ttdef"><b>Definition:</b> jit.common.h:116</div></div>
<div class="ttc" id="astructt__jit__matrix__info_html_a1910d191539aa64e8a949c62629e17b0"><div class="ttname"><a href="structt__jit__matrix__info.html#a1910d191539aa64e8a949c62629e17b0">t_jit_matrix_info::dim</a></div><div class="ttdeci">long dim[JIT_MATRIX_MAX_DIMCOUNT]</div><div class="ttdoc">dimension sizes</div><div class="ttdef"><b>Definition:</b> jit.common.h:121</div></div>
<div class="ttc" id="astructt__jit__matrix__info_html_a4f8e32123477684b18c83ca3d9079803"><div class="ttname"><a href="structt__jit__matrix__info.html#a4f8e32123477684b18c83ca3d9079803">t_jit_matrix_info::planecount</a></div><div class="ttdeci">long planecount</div><div class="ttdoc">number of planes</div><div class="ttdef"><b>Definition:</b> jit.common.h:123</div></div>
<div class="ttc" id="astructt__jit__matrix__info_html_a51f55844070b10955b23235f6ef68d1c"><div class="ttname"><a href="structt__jit__matrix__info.html#a51f55844070b10955b23235f6ef68d1c">t_jit_matrix_info::dimcount</a></div><div class="ttdeci">long dimcount</div><div class="ttdoc">number of dimensions</div><div class="ttdef"><b>Definition:</b> jit.common.h:120</div></div>
<div class="ttc" id="astructt__jit__matrix__info_html_aabcce88ec5bd51aea1662efef2adaf9a"><div class="ttname"><a href="structt__jit__matrix__info.html#aabcce88ec5bd51aea1662efef2adaf9a">t_jit_matrix_info::type</a></div><div class="ttdeci">t_symbol * type</div><div class="ttdoc">primitifve type (char, long, float32, or float64)</div><div class="ttdef"><b>Definition:</b> jit.common.h:118</div></div>
<div class="ttc" id="astructt__object_html"><div class="ttname"><a href="structt__object.html">t_object</a></div><div class="ttdoc">The structure for the head of any object which wants to have inlets or outlets, or support attributes...</div><div class="ttdef"><b>Definition:</b> ext_mess.h:191</div></div>
<div class="ttc" id="astructt__symbol_html"><div class="ttname"><a href="structt__symbol.html">t_symbol</a></div><div class="ttdoc">The symbol.</div><div class="ttdef"><b>Definition:</b> ext_mess.h:102</div></div>
</div><!-- fragment --><p>Naturally, we could also set the t_jit_qt_movie object's time attribute, or call its or frame method, to recall an arbitrary point in time. In fact, nearly every documented method and attribute of the jit.movie object, as it functions in the Max interface, is available from C. The exceptions are those functions implemented in the Max wrapper object, such as framedump. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
