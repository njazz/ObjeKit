<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Max API: Clocks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Max API
   &#160;<span id="projectnumber">8.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__clocks.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Clocks<div class="ingroups"><a class="el" href="group__sched.html">Timing</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Clock objects are your interface to Max’s scheduler.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Clocks:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__clocks.png" border="0" usemap="#agroup____clocks" alt=""/></div>
<map name="agroup____clocks" id="agroup____clocks">
<area shape="rect" title="Clock objects are your interface to Max’s scheduler." alt="" coords="115,5,177,31"/>
<area shape="rect" href="group__sched.html" title=" " alt="" coords="5,5,67,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga65e54252b4cc24c8b7e27bad81fd9a22"><td class="memItemLeft" align="right" valign="top">t_clock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22">clock_new</a> (void *obj, <a class="el" href="group__datatypes.html#ga482c97424132ea0bcb931d42fca5be78">method</a> fn)</td></tr>
<tr class="memdesc:ga65e54252b4cc24c8b7e27bad81fd9a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new Clock object.  <a href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22">More...</a><br /></td></tr>
<tr class="separator:ga65e54252b4cc24c8b7e27bad81fd9a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga511c131106445371c69073365e580f10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10">clock_delay</a> (t_clock *x, long n)</td></tr>
<tr class="memdesc:ga511c131106445371c69073365e580f10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule the execution of a Clock.  <a href="group__clocks.html#ga511c131106445371c69073365e580f10">More...</a><br /></td></tr>
<tr class="separator:ga511c131106445371c69073365e580f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad967e79a2dd00fc54646527baa59eb99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#gad967e79a2dd00fc54646527baa59eb99">clock_unset</a> (t_clock *x)</td></tr>
<tr class="memdesc:gad967e79a2dd00fc54646527baa59eb99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel the scheduled execution of a Clock.  <a href="group__clocks.html#gad967e79a2dd00fc54646527baa59eb99">More...</a><br /></td></tr>
<tr class="separator:gad967e79a2dd00fc54646527baa59eb99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf589fe168baba9fd5529779290343278"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#gaf589fe168baba9fd5529779290343278">clock_fset</a> (t_clock *x, double when)</td></tr>
<tr class="memdesc:gaf589fe168baba9fd5529779290343278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule the execution of a Clock using a floating-point argument.  <a href="group__clocks.html#gaf589fe168baba9fd5529779290343278">More...</a><br /></td></tr>
<tr class="separator:gaf589fe168baba9fd5529779290343278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04a49876d29036406f857cf22b99d9ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga04a49876d29036406f857cf22b99d9ac">clock_getftime</a> (double *time)</td></tr>
<tr class="memdesc:ga04a49876d29036406f857cf22b99d9ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out the current logical time of the scheduler in milliseconds as a floating-point number.  <a href="group__clocks.html#ga04a49876d29036406f857cf22b99d9ac">More...</a><br /></td></tr>
<tr class="separator:ga04a49876d29036406f857cf22b99d9ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed8596bab34f8240fc689358e19c2cfc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#gaed8596bab34f8240fc689358e19c2cfc">setclock_delay</a> (t_setclock *x, t_clock *c, long when)</td></tr>
<tr class="memdesc:gaed8596bab34f8240fc689358e19c2cfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a Clock on a scheduler.  <a href="group__clocks.html#gaed8596bab34f8240fc689358e19c2cfc">More...</a><br /></td></tr>
<tr class="separator:gaed8596bab34f8240fc689358e19c2cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06c818507cd125afc446ecd1e861a096"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga06c818507cd125afc446ecd1e861a096">setclock_unset</a> (t_setclock *x, t_clock *c)</td></tr>
<tr class="memdesc:ga06c818507cd125afc446ecd1e861a096"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a Clock from a scheduler.  <a href="group__clocks.html#ga06c818507cd125afc446ecd1e861a096">More...</a><br /></td></tr>
<tr class="separator:ga06c818507cd125afc446ecd1e861a096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a1e5c04a795a6ab6711747c5df5abd4"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga2a1e5c04a795a6ab6711747c5df5abd4">setclock_gettime</a> (t_setclock *x)</td></tr>
<tr class="memdesc:ga2a1e5c04a795a6ab6711747c5df5abd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out the current time value of a setclock object.  <a href="group__clocks.html#ga2a1e5c04a795a6ab6711747c5df5abd4">More...</a><br /></td></tr>
<tr class="separator:ga2a1e5c04a795a6ab6711747c5df5abd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf923e7e590b48a0a1e1e97b4406bd7e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#gaf923e7e590b48a0a1e1e97b4406bd7e5">setclock_fdelay</a> (t_setclock *x, t_clock *c, double f)</td></tr>
<tr class="memdesc:gaf923e7e590b48a0a1e1e97b4406bd7e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a Clock on a scheduler, using a floating-point time argument.  <a href="group__clocks.html#gaf923e7e590b48a0a1e1e97b4406bd7e5">More...</a><br /></td></tr>
<tr class="separator:gaf923e7e590b48a0a1e1e97b4406bd7e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga900d310679cde4435c6f70e434b4abdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga900d310679cde4435c6f70e434b4abdd">setclock_getftime</a> (t_setclock *x, double *time)</td></tr>
<tr class="memdesc:ga900d310679cde4435c6f70e434b4abdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out the current time value of a setclock object in floating-point milliseconds.  <a href="group__clocks.html#ga900d310679cde4435c6f70e434b4abdd">More...</a><br /></td></tr>
<tr class="separator:ga900d310679cde4435c6f70e434b4abdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11fd7e2733b0186ff82e9766db3031e7"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga11fd7e2733b0186ff82e9766db3031e7">systimer_gettime</a> (void)</td></tr>
<tr class="memdesc:ga11fd7e2733b0186ff82e9766db3031e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">While most Max timing references "logical" time derived from Max's millisecond scheduler, time values produced by the <a class="el" href="group__clocks.html#ga11fd7e2733b0186ff82e9766db3031e7" title="While most Max timing references &quot;logical&quot; time derived from Max&#39;s millisecond scheduler,...">systimer_gettime()</a> are referenced from the CPU clock and can be used to time real world events with microsecond precision.  <a href="group__clocks.html#ga11fd7e2733b0186ff82e9766db3031e7">More...</a><br /></td></tr>
<tr class="separator:ga11fd7e2733b0186ff82e9766db3031e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe5d8b1c9f260d13734a328b2a60ff69"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#gabe5d8b1c9f260d13734a328b2a60ff69">gettime</a> (void)</td></tr>
<tr class="memdesc:gabe5d8b1c9f260d13734a328b2a60ff69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out the current logical time of the scheduler in milliseconds.  <a href="group__clocks.html#gabe5d8b1c9f260d13734a328b2a60ff69">More...</a><br /></td></tr>
<tr class="separator:gabe5d8b1c9f260d13734a328b2a60ff69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab07f4f2122cf12ec0f03aa9b6e0bdebf"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#gab07f4f2122cf12ec0f03aa9b6e0bdebf">gettime_forobject</a> (<a class="el" href="structt__object.html">t_object</a> *x)</td></tr>
<tr class="memdesc:gab07f4f2122cf12ec0f03aa9b6e0bdebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the correct scheduler for the object and return the current time in milliseconds.  <a href="group__clocks.html#gab07f4f2122cf12ec0f03aa9b6e0bdebf">More...</a><br /></td></tr>
<tr class="separator:gab07f4f2122cf12ec0f03aa9b6e0bdebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17d4942d16748fed10221d6139a63c90"><td class="memItemLeft" align="right" valign="top">t_scheduler *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga17d4942d16748fed10221d6139a63c90">scheduler_new</a> (void)</td></tr>
<tr class="memdesc:ga17d4942d16748fed10221d6139a63c90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new local scheduler.  <a href="group__clocks.html#ga17d4942d16748fed10221d6139a63c90">More...</a><br /></td></tr>
<tr class="separator:ga17d4942d16748fed10221d6139a63c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3804ff75fa57099ad0badc478828ad39"><td class="memItemLeft" align="right" valign="top">t_scheduler *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga3804ff75fa57099ad0badc478828ad39">scheduler_set</a> (t_scheduler *x)</td></tr>
<tr class="memdesc:ga3804ff75fa57099ad0badc478828ad39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a scheduler current, so that future related calls (such as <a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10" title="Schedule the execution of a Clock.">clock_delay()</a>) will affect the appropriate scheduler.  <a href="group__clocks.html#ga3804ff75fa57099ad0badc478828ad39">More...</a><br /></td></tr>
<tr class="separator:ga3804ff75fa57099ad0badc478828ad39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66dd9a43942671a3f0d784115ccbf09f"><td class="memItemLeft" align="right" valign="top">t_scheduler *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga66dd9a43942671a3f0d784115ccbf09f">scheduler_get</a> (void)</td></tr>
<tr class="memdesc:ga66dd9a43942671a3f0d784115ccbf09f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the currently set scheduler.  <a href="group__clocks.html#ga66dd9a43942671a3f0d784115ccbf09f">More...</a><br /></td></tr>
<tr class="separator:ga66dd9a43942671a3f0d784115ccbf09f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32271d2501aca774d3d46913a5cf324b"><td class="memItemLeft" align="right" valign="top">t_scheduler *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga32271d2501aca774d3d46913a5cf324b">scheduler_fromobject</a> (<a class="el" href="structt__object.html">t_object</a> *obj)</td></tr>
<tr class="memdesc:ga32271d2501aca774d3d46913a5cf324b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the scheduler associated with a given object, if any.  <a href="group__clocks.html#ga32271d2501aca774d3d46913a5cf324b">More...</a><br /></td></tr>
<tr class="separator:ga32271d2501aca774d3d46913a5cf324b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c85d68d8f2bd4ed0d185b97d2fbb2f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga1c85d68d8f2bd4ed0d185b97d2fbb2f9">scheduler_run</a> (t_scheduler *x, double until)</td></tr>
<tr class="memdesc:ga1c85d68d8f2bd4ed0d185b97d2fbb2f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run scheduler events to a selected time.  <a href="group__clocks.html#ga1c85d68d8f2bd4ed0d185b97d2fbb2f9">More...</a><br /></td></tr>
<tr class="separator:ga1c85d68d8f2bd4ed0d185b97d2fbb2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55cba1f1336528fcef4c269ca19d8a29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga55cba1f1336528fcef4c269ca19d8a29">scheduler_settime</a> (t_scheduler *x, double time)</td></tr>
<tr class="memdesc:ga55cba1f1336528fcef4c269ca19d8a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current time of the scheduler.  <a href="group__clocks.html#ga55cba1f1336528fcef4c269ca19d8a29">More...</a><br /></td></tr>
<tr class="separator:ga55cba1f1336528fcef4c269ca19d8a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bf08416980c7af3ce3000dfa41f1e13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#ga3bf08416980c7af3ce3000dfa41f1e13">scheduler_gettime</a> (t_scheduler *x, double *time)</td></tr>
<tr class="memdesc:ga3bf08416980c7af3ce3000dfa41f1e13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the current time of the selected scheduler.  <a href="group__clocks.html#ga3bf08416980c7af3ce3000dfa41f1e13">More...</a><br /></td></tr>
<tr class="separator:ga3bf08416980c7af3ce3000dfa41f1e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac34db02443be83e5ac2141b82db93ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clocks.html#gaac34db02443be83e5ac2141b82db93ce">scheduler_shift</a> (t_scheduler *x, double amount)</td></tr>
<tr class="memdesc:gaac34db02443be83e5ac2141b82db93ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shift scheduler's current time and run time for all pending clock.  <a href="group__clocks.html#gaac34db02443be83e5ac2141b82db93ce">More...</a><br /></td></tr>
<tr class="separator:gaac34db02443be83e5ac2141b82db93ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Clock objects are your interface to Max’s scheduler. </p>
<p>To use the scheduler, you create a new Clock object using clock_new in your instance creation function. You also have to write a clock function that will be executed when the clock goes off, declared as follows:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> myobject_tick (myobject *x);</div>
</div><!-- fragment --><p>The argument x is determined by the arg argument to <a class="el" href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22" title="Create a new Clock object.">clock_new()</a>. Almost always it will be pointer to your object. Then, in one of your methods, use <a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10" title="Schedule the execution of a Clock.">clock_delay()</a> or clock_fdelay() to schedule yourself. If you want unschedule yourself, call <a class="el" href="group__clocks.html#gad967e79a2dd00fc54646527baa59eb99" title="Cancel the scheduled execution of a Clock.">clock_unset()</a>. To find out what time it is now, use <a class="el" href="group__clocks.html#gabe5d8b1c9f260d13734a328b2a60ff69" title="Find out the current logical time of the scheduler in milliseconds.">gettime()</a> or <a class="el" href="group__clocks.html#ga04a49876d29036406f857cf22b99d9ac" title="Find out the current logical time of the scheduler in milliseconds as a floating-point number.">clock_getftime()</a>. More advanced clock operations are possible with the setclock object interface described in Chapter 9. We suggest you take advantage of the higher timing precision of the floating-point clock routines—all standard Max 4 timing objects such as metro use them.</p>
<p>When the user has Overdrive mode enabled, your clock function will execute at interrupt level.</p>
<h1><a class="anchor" id="clocks_using_clocks"></a>
Using Clocks</h1>
<p>Under normal circumstances, gettime or clock_getftime will not be necessary for scheduling purposes if you use clock_delay or clock_fdelay, but it may be useful for recording the timing of messages or events.</p>
<p>As an example, here’s a fragment of how one might go about writing a metronome using the Max scheduler. First, here’s the data structure we’ll use.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>mymetro {</div>
<div class="line">    <a class="code" href="structt__object.html">t_object</a> *m_obj;</div>
<div class="line">    <span class="keywordtype">void</span> *m_clock;</div>
<div class="line">    <span class="keywordtype">double</span> m_interval;</div>
<div class="line">    <span class="keywordtype">void</span> *m_outlet;</div>
<div class="line">} t_mymetro;</div>
<div class="ttc" id="astructt__object_html"><div class="ttname"><a href="structt__object.html">t_object</a></div><div class="ttdoc">The structure for the head of any object which wants to have inlets or outlets, or support attributes...</div><div class="ttdef"><b>Definition:</b> ext_mess.h:191</div></div>
</div><!-- fragment --><p>We’ll assume that the class has been initialized already. Here’s the instance creation function that will allocate a new Clock.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> *mymetro_create (<span class="keywordtype">double</span> defaultInterval)</div>
<div class="line">{</div>
<div class="line">    t_mymetro *x;</div>
<div class="line">    x = (t_mymetro *)<a class="code" href="group__class__old.html#ga053f428d5edcc7d663980330848e73a6">newobject</a>(mymetro_class); <span class="comment">// allocate space</span></div>
<div class="line">    x-&gt;m_clock = <a class="code" href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22">clock_new</a>(x,(<a class="code" href="group__datatypes.html#ga482c97424132ea0bcb931d42fca5be78">method</a>)mymetro_tick); <span class="comment">// make a clock</span></div>
<div class="line">    x-&gt;m_interval = defaultInterval; <span class="comment">// store the interval</span></div>
<div class="line">    x-&gt;m_outlet = <a class="code" href="group__inout.html#ga69d26d4f2684aab7dbc1b2d18248eae5">bangout</a>(x); <span class="comment">// outlet for ticks</span></div>
<div class="line">    <span class="keywordflow">return</span> x; <span class="comment">// return the new object</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__class__old_html_ga053f428d5edcc7d663980330848e73a6"><div class="ttname"><a href="group__class__old.html#ga053f428d5edcc7d663980330848e73a6">newobject</a></div><div class="ttdeci">void * newobject(void *maxclass)</div><div class="ttdoc">Use newobject to allocate the space for an instance of your class and initialize its object header.</div></div>
<div class="ttc" id="agroup__clocks_html_ga65e54252b4cc24c8b7e27bad81fd9a22"><div class="ttname"><a href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22">clock_new</a></div><div class="ttdeci">t_clock * clock_new(void *obj, method fn)</div><div class="ttdoc">Create a new Clock object.</div></div>
<div class="ttc" id="agroup__datatypes_html_ga482c97424132ea0bcb931d42fca5be78"><div class="ttname"><a href="group__datatypes.html#ga482c97424132ea0bcb931d42fca5be78">method</a></div><div class="ttdeci">BEGIN_USING_C_LINKAGE typedef void *(* method)(void *)</div><div class="ttdoc">Function pointer type for generic methods.</div><div class="ttdef"><b>Definition:</b> ext_mess.h:25</div></div>
<div class="ttc" id="agroup__inout_html_ga69d26d4f2684aab7dbc1b2d18248eae5"><div class="ttname"><a href="group__inout.html#ga69d26d4f2684aab7dbc1b2d18248eae5">bangout</a></div><div class="ttdeci">void * bangout(void *x)</div><div class="ttdoc">Use bangout() to create an outlet that will always send the bang message.</div></div>
</div><!-- fragment --><p>Here’s the method written to respond to the bang message that starts the metronome.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> mymetro_bang (t_mymetro *x)</div>
<div class="line">{</div>
<div class="line">    clock_fdelay(x-&gt;m_clock,0.);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Here’s the Clock function.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> mymetro_tick(t_mymetro *x)</div>
<div class="line">{</div>
<div class="line">    clock_fdelay(x-&gt;m_clock, x-&gt;m_interval);</div>
<div class="line">    <span class="comment">// schedule another metronome tick</span></div>
<div class="line">    <a class="code" href="group__inout.html#gac4d4c7621322b8926b2bc1dce3d91ea7">outlet_bang</a>(x-&gt;m_outlet); <span class="comment">// send out a bang</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__inout_html_gac4d4c7621322b8926b2bc1dce3d91ea7"><div class="ttname"><a href="group__inout.html#gac4d4c7621322b8926b2bc1dce3d91ea7">outlet_bang</a></div><div class="ttdeci">void * outlet_bang(t_outlet *x)</div><div class="ttdoc">Use outlet_bang() to send a bang message out an outlet.</div></div>
</div><!-- fragment --><p>You may also want to stop the metronome at some point. Here’s a method written to respond to the message stop. It uses clock_unset.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> mymetro_stop (t_mymetro *x)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__clocks.html#gad967e79a2dd00fc54646527baa59eb99">clock_unset</a>(x-&gt;m_clock);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__clocks_html_gad967e79a2dd00fc54646527baa59eb99"><div class="ttname"><a href="group__clocks.html#gad967e79a2dd00fc54646527baa59eb99">clock_unset</a></div><div class="ttdeci">void clock_unset(t_clock *x)</div><div class="ttdoc">Cancel the scheduled execution of a Clock.</div></div>
</div><!-- fragment --><p>In your object’s free function, you should call freeobject on any Clocks you’ve created.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> mymetro_free (MyMetro *x)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__class__old.html#gabc32625be7059b1423cbb672635336d9">freeobject</a>((<a class="code" href="structt__object.html">t_object</a> *)x-&gt;m_clock);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__class__old_html_gabc32625be7059b1423cbb672635336d9"><div class="ttname"><a href="group__class__old.html#gabc32625be7059b1423cbb672635336d9">freeobject</a></div><div class="ttdeci">void freeobject(void *op)</div><div class="ttdoc">Release the memory used by a Max object.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="setclock"></a>
Scheduling with setclock Objects</h1>
<p>The setclock object allows a more general way of scheduling Clocks by generalizing the advancement of the time associated with a scheduler. Each setclock object’s "time" can be changed by a process other than the internal millisecond clock. In addition, the object implements routines that modify the mapping of the internal millisecond clock onto the current value of time in an object. Your object can call a set of routines that use either setclock or the normal millisecond clock transparently. Many Max objects accept the message clock followed by an optional symbol to set their internal scheduling to a named setclock object. The typical implementation passes the binding of a Symbol (the s_thing field) to the Setclock functions. By default, the empty symbol is passed. If the binding has been linked to a setclock object, it will be used to schedule the Clock. Otherwise, the Clock is scheduled using the main internal millisecond scheduler. The Setclock data structure is a replacement for void * since there will be no reason for external objects to access it directly.</p>
<h2><a class="anchor" id="setclock_using_the_routines"></a>
Using the setclock Object Routines</h2>
<p>Here’s an example implementation of the relevant methods of a metronome object using the Setclock routines.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>metro</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structt__object.html">t_object</a> m_ob;</div>
<div class="line">    <span class="keywordtype">long</span> m_interval;</div>
<div class="line">    <span class="keywordtype">long</span> m_running;</div>
<div class="line">    <span class="keywordtype">void</span> *m_clock;</div>
<div class="line">    <a class="code" href="structt__symbol.html">t_symbol</a> *m_setclock;</div>
<div class="line">} t_metro;</div>
<div class="ttc" id="astructt__symbol_html"><div class="ttname"><a href="structt__symbol.html">t_symbol</a></div><div class="ttdoc">The symbol.</div><div class="ttdef"><b>Definition:</b> ext_mess.h:102</div></div>
</div><!-- fragment --><p>Here’s the implementation of the routines for turning the metronome on and off. Assume that in the instance creation function, the <a class="el" href="structt__symbol.html" title="The symbol.">t_symbol</a> m_setclock has been set to the empty symbol (gensym ("")) and m_clock has been created; the clock function metro_tick() is defined further on.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> metro_bang(Metro *x) <span class="comment">// turn metronome on</span></div>
<div class="line">{</div>
<div class="line">    x-&gt;m_running = 1;</div>
<div class="line">    <a class="code" href="group__clocks.html#gaed8596bab34f8240fc689358e19c2cfc">setclock_delay</a>(x-&gt;m_setclock-&gt;s_thing,x-&gt;m_clock,0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> metro_stop(Metro *x)</div>
<div class="line">{</div>
<div class="line">    x-&gt;m_running = 0;</div>
<div class="line">    <a class="code" href="group__clocks.html#ga06c818507cd125afc446ecd1e861a096">setclock_unset</a>(x-&gt;m_setclock-&gt;s_thing,x-&gt;m_clock);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__clocks_html_ga06c818507cd125afc446ecd1e861a096"><div class="ttname"><a href="group__clocks.html#ga06c818507cd125afc446ecd1e861a096">setclock_unset</a></div><div class="ttdeci">void setclock_unset(t_setclock *x, t_clock *c)</div><div class="ttdoc">Remove a Clock from a scheduler.</div></div>
<div class="ttc" id="agroup__clocks_html_gaed8596bab34f8240fc689358e19c2cfc"><div class="ttname"><a href="group__clocks.html#gaed8596bab34f8240fc689358e19c2cfc">setclock_delay</a></div><div class="ttdeci">void setclock_delay(t_setclock *x, t_clock *c, long when)</div><div class="ttdoc">Schedule a Clock on a scheduler.</div></div>
</div><!-- fragment --><p>Here is the implementation of the clock function metro_tick() that runs periodically.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> metro_tick(Metro *x)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__inout.html#gac4d4c7621322b8926b2bc1dce3d91ea7">outlet_bang</a>(x-&gt;m_ob.o_outlet);</div>
<div class="line">    <span class="keywordflow">if</span> (x-&gt;m_running)</div>
<div class="line">        <a class="code" href="group__clocks.html#gaed8596bab34f8240fc689358e19c2cfc">setclock_delay</a>(x-&gt;m_setclock-&gt;s_thing,x-&gt;m_clock,x-&gt;m_interval);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Finally, here is an implementation of the method to respond to the clock message. Note that the function tries to verify that a non-zero value bound to the <a class="el" href="structt__symbol.html" title="The symbol.">t_symbol</a> passed as an argument is in fact an instance of setclock by checking to see if it responds to the unset message. If not, the metronome refuses to assign the <a class="el" href="structt__symbol.html" title="The symbol.">t_symbol</a> to its internal m_setclock field.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> metro_clock(Metro *x, <a class="code" href="structt__symbol.html">t_symbol</a> *s)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">void</span> *old = x-&gt;m_setclock-&gt;s_thing;</div>
<div class="line">    <span class="keywordtype">void</span> *c = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// the line below can be restated as:</span></div>
<div class="line">    <span class="comment">//  if s is the empty symbol</span></div>
<div class="line">    <span class="comment">//  or s-&gt;s_thing is zero</span></div>
<div class="line">    <span class="comment">//  or s-&gt;s_thing is non-zero and a setclock object</span></div>
<div class="line">    <span class="keywordflow">if</span> ((s == <a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb">gensym</a>(<span class="stringliteral">&quot;&quot;</span>)) || ((c = s-&gt;<a class="code" href="structt__symbol.html#abd835e42c1c3ef3ed958c22cc73c9e69">s_thing</a>) &amp;&amp; <a class="code" href="group__class__old.html#ga54a45bcc841c2033467be14e6861b548">zgetfn</a>(c,&amp;s_unset)))</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (old)</div>
<div class="line">            <a class="code" href="group__clocks.html#ga06c818507cd125afc446ecd1e861a096">setclock_unset</a>(old,x-&gt;m_clock);</div>
<div class="line">        x-&gt;m_setclock = s;</div>
<div class="line">        <span class="keywordflow">if</span> (x-&gt;m_running)</div>
<div class="line">            <a class="code" href="group__clocks.html#gaed8596bab34f8240fc689358e19c2cfc">setclock_delay</a>(c,x-&gt;m_clock,0L);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__class__old_html_ga54a45bcc841c2033467be14e6861b548"><div class="ttname"><a href="group__class__old.html#ga54a45bcc841c2033467be14e6861b548">zgetfn</a></div><div class="ttdeci">method zgetfn(t_object *op, t_symbol *msg)</div><div class="ttdoc">Use zgetfn() to send an untyped message to a Max object without error checking.</div></div>
<div class="ttc" id="agroup__symbol_html_ga5d8db08b384aeb76eaee85a15f46fbcb"><div class="ttname"><a href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb">gensym</a></div><div class="ttdeci">t_symbol * gensym(C74_CONST char *s)</div><div class="ttdoc">Given a C-string, fetch the matching t_symbol pointer from the symbol table, generating the symbol if...</div></div>
<div class="ttc" id="astructt__symbol_html_abd835e42c1c3ef3ed958c22cc73c9e69"><div class="ttname"><a href="structt__symbol.html#abd835e42c1c3ef3ed958c22cc73c9e69">t_symbol::s_thing</a></div><div class="ttdeci">struct object * s_thing</div><div class="ttdoc">possible binding to a t_object</div><div class="ttdef"><b>Definition:</b> ext_mess.h:104</div></div>
</div><!-- fragment --><h1><a class="anchor" id="creating_schedulers"></a>
Creating Schedulers</h1>
<p>If you want to schedule events independently of the time of the global Max scheduler, you can create your own scheduler with <a class="el" href="group__clocks.html#ga17d4942d16748fed10221d6139a63c90" title="Create a new local scheduler.">scheduler_new()</a>. By calling <a class="el" href="group__clocks.html#ga3804ff75fa57099ad0badc478828ad39" title="Make a scheduler current, so that future related calls (such as clock_delay()) will affect the approp...">scheduler_set()</a> with the newly created scheduler, calls to <a class="el" href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22" title="Create a new Clock object.">clock_new()</a> will create Clocks tied to your scheduler instead of Max’s global one. You can then control the time of the scheduler (using <a class="el" href="group__clocks.html#ga55cba1f1336528fcef4c269ca19d8a29" title="Set the current time of the scheduler.">scheduler_settime()</a>) as well as when it executes clock functions (using <a class="el" href="group__clocks.html#ga1c85d68d8f2bd4ed0d185b97d2fbb2f9" title="Run scheduler events to a selected time.">scheduler_run()</a>). This is a more general facility than the setclock object routines, but unlike using the time from a setclock object to determine when a Clock function runs, once a Clock is tied to a scheduler. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga511c131106445371c69073365e580f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga511c131106445371c69073365e580f10">&#9670;&nbsp;</a></span>clock_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clock_delay </td>
          <td>(</td>
          <td class="paramtype">t_clock *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule the execution of a Clock. </p>
<p><a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10" title="Schedule the execution of a Clock.">clock_delay()</a> sets a clock to go off at a certain number of milliseconds from the current logical time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Clock to schedule. </td></tr>
    <tr><td class="paramname">n</td><td>Delay, in milliseconds, before the Clock will execute. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>clock_fdelay() </dd></dl>

</div>
</div>
<a id="gaf589fe168baba9fd5529779290343278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf589fe168baba9fd5529779290343278">&#9670;&nbsp;</a></span>clock_fset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clock_fset </td>
          <td>(</td>
          <td class="paramtype">t_clock *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule the execution of a Clock using a floating-point argument. </p>
<p><a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10" title="Schedule the execution of a Clock.">clock_delay()</a> sets a clock to go off at a certain number of milliseconds from the current logical time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>Clock to schedule. </td></tr>
    <tr><td class="paramname">time</td><td>Delay, in milliseconds, before the Clock will execute. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10" title="Schedule the execution of a Clock.">clock_delay()</a> </dd></dl>

</div>
</div>
<a id="ga04a49876d29036406f857cf22b99d9ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga04a49876d29036406f857cf22b99d9ac">&#9670;&nbsp;</a></span>clock_getftime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clock_getftime </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find out the current logical time of the scheduler in milliseconds as a floating-point number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>Returns the current time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#gabe5d8b1c9f260d13734a328b2a60ff69" title="Find out the current logical time of the scheduler in milliseconds.">gettime()</a> </dd>
<dd>
<a class="el" href="group__clocks.html#ga900d310679cde4435c6f70e434b4abdd" title="Find out the current time value of a setclock object in floating-point milliseconds.">setclock_getftime()</a> </dd>
<dd>
<a class="el" href="group__clocks.html#ga2a1e5c04a795a6ab6711747c5df5abd4" title="Find out the current time value of a setclock object.">setclock_gettime()</a> </dd></dl>

</div>
</div>
<a id="ga65e54252b4cc24c8b7e27bad81fd9a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65e54252b4cc24c8b7e27bad81fd9a22">&#9670;&nbsp;</a></span>clock_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">t_clock* clock_new </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga482c97424132ea0bcb931d42fca5be78">method</a>&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new Clock object. </p>
<p>Normally, <a class="el" href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22" title="Create a new Clock object.">clock_new()</a> is called in your instance creation function—and it cannot be called from a thread other than the main thread. To get rid of a clock object you created, use <a class="el" href="group__class__old.html#gabc32625be7059b1423cbb672635336d9" title="Release the memory used by a Max object.">freeobject()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>Argument that will be passed to clock function fn when it is called. This will almost always be a pointer to your object. </td></tr>
    <tr><td class="paramname">fn</td><td>Function to be called when the clock goes off, declared to take a single argument as shown in <a class="el" href="group__clocks.html#clocks_using_clocks">Using Clocks</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a newly created Clock object. </dd></dl>

</div>
</div>
<a id="gad967e79a2dd00fc54646527baa59eb99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad967e79a2dd00fc54646527baa59eb99">&#9670;&nbsp;</a></span>clock_unset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clock_unset </td>
          <td>(</td>
          <td class="paramtype">t_clock *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel the scheduled execution of a Clock. </p>
<p><a class="el" href="group__clocks.html#gad967e79a2dd00fc54646527baa59eb99" title="Cancel the scheduled execution of a Clock.">clock_unset()</a> will do nothing (and not complain) if the Clock passed to it has not been set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Clock to cancel. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabe5d8b1c9f260d13734a328b2a60ff69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe5d8b1c9f260d13734a328b2a60ff69">&#9670;&nbsp;</a></span>gettime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long gettime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find out the current logical time of the scheduler in milliseconds. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the current time. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#ga04a49876d29036406f857cf22b99d9ac" title="Find out the current logical time of the scheduler in milliseconds as a floating-point number.">clock_getftime()</a> </dd></dl>

</div>
</div>
<a id="gab07f4f2122cf12ec0f03aa9b6e0bdebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab07f4f2122cf12ec0f03aa9b6e0bdebf">&#9670;&nbsp;</a></span>gettime_forobject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double gettime_forobject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__object.html">t_object</a> *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the correct scheduler for the object and return the current time in milliseconds. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the current time. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#ga04a49876d29036406f857cf22b99d9ac" title="Find out the current logical time of the scheduler in milliseconds as a floating-point number.">clock_getftime()</a> </dd></dl>

</div>
</div>
<a id="ga32271d2501aca774d3d46913a5cf324b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32271d2501aca774d3d46913a5cf324b">&#9670;&nbsp;</a></span>scheduler_fromobject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">t_scheduler* scheduler_fromobject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__object.html">t_object</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the scheduler associated with a given object, if any. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">o</td><td>The object who's scheduler is to be returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This routine returns a pointer to the scheduler or the passed in object, </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="ga66dd9a43942671a3f0d784115ccbf09f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga66dd9a43942671a3f0d784115ccbf09f">&#9670;&nbsp;</a></span>scheduler_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">t_scheduler* scheduler_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the currently set scheduler. </p>
<dl class="section return"><dt>Returns</dt><dd>This routine returns a pointer to the current scheduler, </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="ga3bf08416980c7af3ce3000dfa41f1e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3bf08416980c7af3ce3000dfa41f1e13">&#9670;&nbsp;</a></span>scheduler_gettime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduler_gettime </td>
          <td>(</td>
          <td class="paramtype">t_scheduler *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the current time of the selected scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The scheduler to query. </td></tr>
    <tr><td class="paramname">time</td><td>The current time of the selected scheduler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="ga17d4942d16748fed10221d6139a63c90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17d4942d16748fed10221d6139a63c90">&#9670;&nbsp;</a></span>scheduler_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">t_scheduler* scheduler_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new local scheduler. </p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the newly created scheduler. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="ga1c85d68d8f2bd4ed0d185b97d2fbb2f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c85d68d8f2bd4ed0d185b97d2fbb2f9">&#9670;&nbsp;</a></span>scheduler_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduler_run </td>
          <td>(</td>
          <td class="paramtype">t_scheduler *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>until</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run scheduler events to a selected time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The scheduler to advance. </td></tr>
    <tr><td class="paramname">until</td><td>The ending time for this run (in milliseconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="ga3804ff75fa57099ad0badc478828ad39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3804ff75fa57099ad0badc478828ad39">&#9670;&nbsp;</a></span>scheduler_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">t_scheduler* scheduler_set </td>
          <td>(</td>
          <td class="paramtype">t_scheduler *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a scheduler current, so that future related calls (such as <a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10" title="Schedule the execution of a Clock.">clock_delay()</a>) will affect the appropriate scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The scheduler to make current. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This routine returns a pointer to the previously current scheduler, saved and restored when local scheduling is complete. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="ga55cba1f1336528fcef4c269ca19d8a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga55cba1f1336528fcef4c269ca19d8a29">&#9670;&nbsp;</a></span>scheduler_settime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduler_settime </td>
          <td>(</td>
          <td class="paramtype">t_scheduler *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current time of the scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The scheduler to set. </td></tr>
    <tr><td class="paramname">time</td><td>The new current time for the selected scheduler (in milliseconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="gaac34db02443be83e5ac2141b82db93ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac34db02443be83e5ac2141b82db93ce">&#9670;&nbsp;</a></span>scheduler_shift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduler_shift </td>
          <td>(</td>
          <td class="paramtype">t_scheduler *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>amount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shift scheduler's current time and run time for all pending clock. </p>
<p>Could be used to change scheduler's time reference without impacting current clocks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The scheduler to affect. </td></tr>
    <tr><td class="paramname">amount</td><td>Number of milliseconds to shift by. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#creating_schedulers">Creating Schedulers</a> </dd></dl>

</div>
</div>
<a id="gaed8596bab34f8240fc689358e19c2cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed8596bab34f8240fc689358e19c2cfc">&#9670;&nbsp;</a></span>setclock_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setclock_delay </td>
          <td>(</td>
          <td class="paramtype">t_setclock *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">t_clock *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a Clock on a scheduler. </p>
<p>Schedules the Clock c to execute at time units after the current time. If scheduler x is 0 or does not point to a setclock object, the internal millisecond scheduler is used. Otherwise c is scheduled on the setclock object's list of Clocks. The Clock should be created with <a class="el" href="group__clocks.html#ga65e54252b4cc24c8b7e27bad81fd9a22" title="Create a new Clock object.">clock_new()</a>, the same as for a Clock passed to <a class="el" href="group__clocks.html#ga511c131106445371c69073365e580f10" title="Schedule the execution of a Clock.">clock_delay()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>A setclock object to be used for scheduling this clock. </td></tr>
    <tr><td class="paramname">c</td><td>Clock object containing the function to be executed. </td></tr>
    <tr><td class="paramname">time</td><td>Time delay (in the units of the Setclock) from the current time when the Clock will be executed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#setclock">Scheduling with setclock Objects</a> </dd>
<dd>
<a class="el" href="group__clocks.html#gaf923e7e590b48a0a1e1e97b4406bd7e5" title="Schedule a Clock on a scheduler, using a floating-point time argument.">setclock_fdelay()</a> </dd></dl>

</div>
</div>
<a id="gaf923e7e590b48a0a1e1e97b4406bd7e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf923e7e590b48a0a1e1e97b4406bd7e5">&#9670;&nbsp;</a></span>setclock_fdelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setclock_fdelay </td>
          <td>(</td>
          <td class="paramtype">t_setclock *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">t_clock *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a Clock on a scheduler, using a floating-point time argument. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>A setclock object to be used for scheduling this clock. </td></tr>
    <tr><td class="paramname">c</td><td>Clock object containing the function to be executed. </td></tr>
    <tr><td class="paramname">time</td><td>Time delay (in the units of the Setclock) from the current time when the Clock will be executed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#setclock">Scheduling with setclock Objects</a> </dd>
<dd>
<a class="el" href="group__clocks.html#gaed8596bab34f8240fc689358e19c2cfc" title="Schedule a Clock on a scheduler.">setclock_delay()</a> </dd></dl>

</div>
</div>
<a id="ga900d310679cde4435c6f70e434b4abdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga900d310679cde4435c6f70e434b4abdd">&#9670;&nbsp;</a></span>setclock_getftime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setclock_getftime </td>
          <td>(</td>
          <td class="paramtype">t_setclock *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find out the current time value of a setclock object in floating-point milliseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>A setclock object. </td></tr>
    <tr><td class="paramname">time</td><td>The current time in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#setclock">Scheduling with setclock Objects</a> </dd>
<dd>
<a class="el" href="group__clocks.html#ga2a1e5c04a795a6ab6711747c5df5abd4" title="Find out the current time value of a setclock object.">setclock_gettime()</a> </dd></dl>

</div>
</div>
<a id="ga2a1e5c04a795a6ab6711747c5df5abd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2a1e5c04a795a6ab6711747c5df5abd4">&#9670;&nbsp;</a></span>setclock_gettime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long setclock_gettime </td>
          <td>(</td>
          <td class="paramtype">t_setclock *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find out the current time value of a setclock object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>A setclock object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the current time value of the setclock object scheduler. If scheduler is 0, setclock_gettime is equivalent to the function gettime that returns the current value of the internal millisecond clock. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#setclock">Scheduling with setclock Objects</a> </dd>
<dd>
<a class="el" href="group__clocks.html#ga900d310679cde4435c6f70e434b4abdd" title="Find out the current time value of a setclock object in floating-point milliseconds.">setclock_getftime()</a> </dd></dl>

</div>
</div>
<a id="ga06c818507cd125afc446ecd1e861a096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06c818507cd125afc446ecd1e861a096">&#9670;&nbsp;</a></span>setclock_unset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setclock_unset </td>
          <td>(</td>
          <td class="paramtype">t_setclock *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">t_clock *&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a Clock from a scheduler. </p>
<p>This function unschedules the Clock c in the list of Clocks in the setclock object x, or the internal millisecond scheduler if scheduler is 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The setclock object that was used to schedule this clock. If 0, the clock is unscheduled from the internal millisecond scheduler. </td></tr>
    <tr><td class="paramname">c</td><td>Clock object to be removed from the scheduler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__clocks.html#setclock">Scheduling with setclock Objects</a> </dd></dl>

</div>
</div>
<a id="ga11fd7e2733b0186ff82e9766db3031e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11fd7e2733b0186ff82e9766db3031e7">&#9670;&nbsp;</a></span>systimer_gettime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double systimer_gettime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>While most Max timing references "logical" time derived from Max's millisecond scheduler, time values produced by the <a class="el" href="group__clocks.html#ga11fd7e2733b0186ff82e9766db3031e7" title="While most Max timing references &quot;logical&quot; time derived from Max&#39;s millisecond scheduler,...">systimer_gettime()</a> are referenced from the CPU clock and can be used to time real world events with microsecond precision. </p>
<p>The standard 'cpuclock' external in Max is a simple wrapper around this function.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns the current real-world time. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
